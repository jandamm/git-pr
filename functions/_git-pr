#compdef git-pr

_arguments '1: :->cmd' '2: :->arg1'

function _last_refs() {
	_values refs $(git log --format='%h' head...origin/head)
}

if [[ $state = 'cmd' ]]; then
	_values command 'new' 'update' 'checkout' 'open' 'branch'
else
	case $line[1] in
		open) _values option --pull;;
		new|update|branch)  _last_refs;;
	esac
fi
